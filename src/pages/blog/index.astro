---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import FormattedDate from "../../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Blog" description="My personal blog">
    <h1 class="text-3xl font-bold mb-8">Blog</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {
            posts.map((post) => (
                <a
                    href={`/blog/${post.slug}/`}
                    class="block bg-white dark:bg-accent p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow"
                >
                    <h2 class="text-xl font-bold mb-2">{post.data.title}</h2>
                    <p class="text-gray-700 dark:text-gray-300 mb-4">
                        {post.data.description}
                    </p>
                    <FormattedDate date={post.data.pubDate} />
                </a>
            ))
        }
    </div>
</Layout>
